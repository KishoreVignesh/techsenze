/**
 * Coin Slider - Unique jQuery Image Slider
 * @version: 1.0 - (2010/04/04)
 * @requires jQuery v1.2.2 or later
 * @author Ivan Lazarevic
 * Examples and documentation at: http://workshop.rs/projects/coin-slider/
 * Licensed under MIT licence:
 * http://www.opensource.org/licenses/mit-license.php
 * 
 * Last commit: Jul 15, 2014 (Fix when brackets in background-image-url - f44d6b25db2fae12b03619226814cef1d137e3c6)
**/
(function(e){var t=[],n=[],r=[],s=[],o=[],u=[],a=[],f=[],l=[],c=[],h=[],p="coinsliderUniqueID",d=0;e.fn.coinslider=e.fn.CoinSlider=function(v){var m=function(r){var i=parseInt(t[r.id].width/t[r.id].spw),o=i,u=parseInt(t[r.id].height/t[r.id].sph),a=u,f=0,l=0,c=0,h,p,d=t[r.id].width-t[r.id].spw*o,v=d,m=t[r.id].height-t[r.id].sph*a,g=m;for(h=1;h<=t[r.id].sph;h++){v=d;if(g>0){g--;a=u+1}else{a=u}for(p=1;p<=t[r.id].spw;p++){if(v>0){v--;o=i+1}else{o=i}n[r.id][f]=h+""+p;f++;if(t[r.id].links){e("#"+r.id).append("<a href='"+s[r.id][0]+"' class='cs-"+r.id+"' id='cs-"+r.id+h+p+"' style='width:"+o+"px; height:"+a+"px; float: left; position: absolute;'></a>")}else{e("#"+r.id).append("<div class='cs-"+r.id+"' id='cs-"+r.id+h+p+"' style='width:"+o+"px; height:"+a+"px; float: left; position: absolute;'></div>")}e("#cs-"+r.id+h+p).css({"background-position":-l+"px "+(-c+"px"),left:l,top:c});l+=o}c+=a;l=0}if(!t[r.id].navigationPrevNextAlwaysShown){e(".cs-"+r.id).mouseover(function(){e("#cs-navigation-"+r.id).show()});e(".cs-"+r.id).mouseout(function(){e("#cs-navigation-"+r.id).hide()});e("#cs-title-"+r.id).mouseover(function(){e("#cs-navigation-"+r.id).show()});e("#cs-title-"+r.id).mouseout(function(){e("#cs-navigation-"+r.id).hide()})}if(t[r.id].hoverPause){e(".cs-"+r.id).mouseover(function(){t[r.id].pause=true});e(".cs-"+r.id).mouseout(function(){t[r.id].pause=false});e("#cs-title-"+r.id).mouseover(function(){t[r.id].pause=true});e("#cs-title-"+r.id).mouseout(function(){t[r.id].pause=false})}};var g=function(e){clearInterval(a[e.id]);var n=t[e.id].delay+t[e.id].spw*t[e.id].sph*t[e.id].sDelay;a[e.id]=setInterval(function(){y(e)},n)};var y=function(i,s){if(t[i.id].pause===true){return}E(i);c[i.id]=0;l[i.id]=setInterval(function(){b(i,n[i.id][c[i.id]])},t[i.id].sDelay);e(i).css({"background-image":'url("'+r[i.id][f[i.id]]+'")'});if(typeof s=="undefined"){f[i.id]++}else{if(s=="prev"){f[i.id]--}else{f[i.id]=s}}if(f[i.id]==r[i.id].length){f[i.id]=0}if(f[i.id]==-1){f[i.id]=r[i.id].length-1}e(".cs-button-"+i.id).removeClass("cs-active");e("#cs-button-"+i.id+"-"+(f[i.id]+1)).addClass("cs-active");if(u[i.id][f[i.id]]){e("#cs-title-"+i.id).css({opacity:0}).animate({opacity:t[i.id].opacity},t[i.id].titleSpeed);e("#cs-title-"+i.id).html(u[i.id][f[i.id]])}else{e("#cs-title-"+i.id).css("opacity",0)}};var b=function(n,i){e(".cs-"+n.id).attr("href",s[n.id][f[n.id]]).attr("target",o[n.id][f[n.id]]);if(c[n.id]==t[n.id].spw*t[n.id].sph){clearInterval(l[n.id]);return}e("#cs-"+n.id+i).css({opacity:0,"background-image":'url("'+r[n.id][f[n.id]]+'")'});e("#cs-"+n.id+i).animate({opacity:1},300);c[n.id]++};var w=function(n){if(t[n.id].showNavigationPrevNext){e(n).append("<div id='cs-navigation-"+n.id+"'></div>");if(!t[n.id].navigationPrevNextAlwaysShown){e("#cs-navigation-"+n.id).hide()}e("#cs-navigation-"+n.id).append("<a href='#' id='cs-prev-"+n.id+"' class='cs-prev'>"+t[n.id].prevText+"</a>");e("#cs-navigation-"+n.id).append("<a href='#' id='cs-next-"+n.id+"' class='cs-next'>"+t[n.id].nextText+"</a>");e("#cs-prev-"+n.id).css({position:"absolute",top:t[n.id].height/2-15,left:0,"z-index":1001,"line-height":"30px",opacity:t[n.id].opacity}).click(function(e){e.preventDefault();y(n,"prev");g(n)}).mouseover(function(){e("#cs-navigation-"+n.id).show()});e("#cs-next-"+n.id).css({position:"absolute",top:t[n.id].height/2-15,right:0,"z-index":1001,"line-height":"30px",opacity:t[n.id].opacity}).click(function(e){e.preventDefault();y(n);g(n)}).mouseover(function(){e("#cs-navigation-"+n.id).show()});e("#cs-navigation-"+n.id+" a").mouseout(function(){if(!t[n.id].navigationPrevNextAlwaysShown)e("#cs-navigation-"+n.id).hide();t[n.id].pause=false})}if(t[n.id].showNavigationButtons){e("<div id='cs-buttons-"+n.id+"' class='cs-buttons'></div>").appendTo(e("#coin-slider-"+n.id));var i;for(i=1;i<r[n.id].length+1;i++){e("#cs-buttons-"+n.id).append("<a href='#' class='cs-button-"+n.id+"' id='cs-button-"+n.id+"-"+i+"'>"+i+"</a>")}e.each(e(".cs-button-"+n.id),function(t,r){e(r).click(function(r){e(".cs-button-"+n.id).removeClass("cs-active");e(this).addClass("cs-active");r.preventDefault();y(n,t);g(n)})});e("#cs-buttons-"+n.id).css({left:"50%","margin-left":-r[n.id].length*15/2-5,position:"relative"})}};var E=function(e){var r=["random","swirl","rain","straight"],i,s,o,u;if(t[e.id].effect===""){u=r[Math.floor(Math.random()*r.length)]}else{u=t[e.id].effect}n[e.id]=[];if(u=="random"){o=0;for(i=1;i<=t[e.id].sph;i++){for(s=1;s<=t[e.id].spw;s++){n[e.id][o]=i+""+s;o++}}S(n[e.id])}if(u=="rain"){T(e)}if(u=="swirl"){x(e)}if(u=="straight"){N(e)}h[e.id]*=-1;if(h[e.id]>0){n[e.id].reverse()}};var S=function(e){var t=e.length,n,r,i;if(t===0){return false}while(--t){n=Math.floor(Math.random()*(t+1));r=e[t];i=e[n];e[t]=i;e[n]=r}};var x=function(e){var r=t[e.id].sph,i=t[e.id].spw,s=1,o=1,u=0,a=0,f=0,l,c=true,h;while(c){a=u===0||u===2?i:r;for(h=1;h<=a;h++){n[e.id][f]=s+""+o;f++;if(h!=a){switch(u){case 0:o++;break;case 1:s++;break;case 2:o--;break;case 3:s--;break}}}u=(u+1)%4;switch(u){case 0:i--;o++;break;case 1:r--;s++;break;case 2:i--;o--;break;case 3:r--;s--;break}l=k(r,i)-C(r,i);if(i<=l&&r<=l){c=false}}};var T=function(e){var r=t[e.id].sph,s=t[e.id].spw,o=0,u=1,a=1,f=1,l=true;while(l){for(i=f;i<=u;i++){n[e.id][o]=i+""+parseInt(a-i+1);o++}a++;if(u<r&&a<s&&r<s){u++}if(u<r&&r>=s){u++}if(a>s){f++}if(f>u){l=false}}};var N=function(e){var r=0,i,s;for(i=1;i<=t[e.id].sph;i++){for(s=1;s<=t[e.id].spw;s++){n[e.id][r]=i+""+s;r++}}};var C=function(e,t){if(e>t){return t}else{return e}};var k=function(e,t){if(e<t){return t}else{return e}};var L=function(i){if(i.id===""){i.id=p+d++}n[i.id]=[];r[i.id]=[];s[i.id]=[];o[i.id]=[];u[i.id]=[];f[i.id]=0;c[i.id]=0;h[i.id]=1;t[i.id]=e.extend({},e.fn.coinslider.defaults,v);e.each(e("#"+i.id+" img"),function(t,n){r[i.id][t]=e(n).attr("src");s[i.id][t]=e(n).parent().is("a")?e(n).parent().attr("href"):"";o[i.id][t]=e(n).parent().is("a")?e(n).parent().attr("target"):"";u[i.id][t]=e(n).next().is("span")?e(n).next().html():"";e(n).hide();e(n).next().hide()});e(i).css({"background-image":'url("'+r[i.id][0]+'")',width:t[i.id].width,height:t[i.id].height,position:"relative","background-position":"top left"}).wrap("<div class='coin-slider' id='coin-slider-"+i.id+"' />");e("#"+i.id).append("<div class='cs-title' id='cs-title-"+i.id+"' style='position: absolute; bottom:0; left: 0; z-index: 1000;'></div>");m(i);if(t[i.id].navigation){w(i)}y(i,0);g(i)};this.each(function(){L(this)})};e.fn.coinslider.defaults={width:565,height:290,spw:7,sph:5,delay:3e3,sDelay:30,opacity:.7,titleSpeed:500,effect:"",links:true,hoverPause:true,prevText:"prev",nextText:"next",navigation:true,showNavigationPrevNext:true,showNavigationButtons:true,navigationPrevNextAlwaysShown:false}})(jQuery)